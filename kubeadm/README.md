# Kubeadm Init Scripts

–ù–∞–±–æ—Ä —É—Ç–∏–ª–∏—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ control-plane —É–∑–ª–∞ Kubernetes —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `kubeadm`.

---

## –°–∫—Ä–∏–ø—Ç—ã

### 1. `generate_admin_kubeconfig.py`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**
–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç `admin.conf` kubeconfig-—Ñ–∞–π–ª, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–ª–∞—Å—Ç–µ—Ä—É –æ—Ç –∏–º–µ–Ω–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç**

* –ß–∏—Ç–∞–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–π IP –∏–∑ `collected_info.py`;
* –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç kubeconfig-—Ñ–∞–π–ª —Å —Å—Å—ã–ª–∫–æ–π –Ω–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã (`ca.crt`, `admin.crt`, `admin.key`);
* –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ `/etc/kubernetes/admin.conf`.

### 2. `generate_kubeadm_config.py`

üîß **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**
–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–∞–π–ª–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ `kubeadm.yaml` –¥–ª—è –∑–∞–ø—É—Å–∫–∞ `kubeadm init` —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –∏–∑ `collected_info.py`.

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç**

* –ó–∞–≥—Ä—É–∂–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞: IP, CIDR, –¥–æ–º–µ–Ω, –∏–º—è —Ö–æ—Å—Ç–∞ –∏ —Ç.–ø.;
* –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç YAML-—Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ `kubeadm` —Å –Ω—É–∂–Ω—ã–º–∏ —Å–µ–∫—Ü–∏—è–º–∏ (`InitConfiguration`, `ClusterConfiguration`, `KubeletConfiguration`);
* –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ñ–∞–π–ª –≤ `data/kubeadm_config.yaml`.

### 3. `run_kubeadm_phases.py`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**
–ü–æ—à–∞–≥–æ–≤—ã–π –∑–∞–ø—É—Å–∫ —Ñ–∞–∑ `kubeadm init`, –≤–º–µ—Å—Ç–æ –ø–æ–ª–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π.

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç**

* –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `kubeadm init phase ...` –¥–ª—è –∑–∞–ø—É—Å–∫–∞:

  * –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤,
  * –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ kubeconfig-—Ñ–∞–π–ª–æ–≤,
  * —É—Å—Ç–∞–Ω–æ–≤–∫–∏ control-plane –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ —Ç.–¥.;
* –£–ø—Ä–æ—â–∞–µ—Ç –æ—Ç–ª–∞–¥–∫—É –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏.

---

## –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ

–≠—Ç–∏ —Å–∫—Ä–∏–ø—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –Ω–∞ —ç—Ç–∞–ø–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–µ—Ä–≤–æ–≥–æ —É–∑–ª–∞ (bootstrap) –≤ –∫–∞—Å—Ç–æ–º–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–µ Kubernetes. –ü–æ–∑–≤–æ–ª—è—é—Ç –æ–±–µ—Å–ø–µ—á–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –ø—Ä–æ—Ü–µ—Å—Å–æ–º, –º–æ–¥—É–ª—å–Ω–æ—Å—Ç—å –∏ –ø–æ–≤—Ç–æ—Ä—è–µ–º–æ—Å—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫–∏.

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞

* `data/collected_info.py` ‚Äî —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏–∏;
* `data/kubeadm_config.yaml` ‚Äî –∏—Ç–æ–≥–æ–≤—ã–π –∫–æ–Ω—Ñ–∏–≥ kubeadm;
* `/etc/kubernetes/admin.conf` ‚Äî –∏—Ç–æ–≥–æ–≤—ã–π kubeconfig.

---

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

* Python 3
* `kubeadm`, `kubectl`
* –ü—Ä–∞–≤–∞ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
* –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –∑–∞—Ä–∞–Ω–µ–µ (`generate_all.py`)

---

## –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

–≠—Ç–∏ —Å–∫—Ä–∏–ø—Ç—ã –≤—Ö–æ–¥—è—Ç –≤ —Å–æ—Å—Ç–∞–≤ –ø–∞–π–ø–ª–∞–π–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ control-plane —É–∑–ª–∞ –∏ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –∏–∑ `main.py` –ø–æ—ç—Ç–∞–ø–Ω–æ.
